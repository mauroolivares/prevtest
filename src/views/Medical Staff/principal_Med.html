<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			rel="icon"
			href="https://ccmediterraneo.cl/wp-content/uploads/2019/12/cropped-descarga-32x32.png"
			sizes="32x32"
		/>
		<link rel="stylesheet" href="../../public/styles/style.css" />
		<title>Principal</title>
		<link
			rel="stylesheet"
			type="text/css"
			href="http://www.jqueryscript.net/css/jquerysctipttop.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="../../public/css/paginationstyle.css"
		/>
		<script
			type="text/javascript"
			src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"
		></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
	</head>
	<body class="font-sans w-full">
		<header id="header" class="h-16 bg-blue-100 drop-shadow">
			<div class="container px-4 mx-auto flex justify-between items-center">
				<div class="flex items-center mx-2 px-4 w-auto">
					<img class="h-9" src="../../public/images/LogoCentro.png" />
				</div>
				<div class="flex justify-center items-center">
					<span
						class="px-2 text-sky-700 uppercase font-bold rounded"
						id="navCenter2"
						>Principal
					</span>
				</div>

				<!-- Menu links -->
				<ul
					id="menunav"
					class="hidden fixed top-0 right-0 px-10 py-16 rounded-lg shadow-md bg-sky-500 z-20 md:mx-2 md:relative md:flex md:p-0 md:flex-row md:space-x-2"
				>
					<li class="md:hidden z-20 fixed top-2 right-6">
						<a
							href="javascript:void(0)"
							class="text-right text-white text-4xl"
							onclick="toggleMenu()"
							>&times;</a
						>
					</li>
					<li class="p-2">
						<div class="flex items-center">
							<div class="shrink-0">
								<!--src="https://mdbcdn.b-cdn.net/img/new/avatars/5.webp"-->
								<img
									src="../../public/images/picture_Med.png"
									class="rounded-full w-10"
									alt="Avatar"
								/>
							</div>
							<div class="grow mx-3">
								<p class="text-sm font-semibold text-white rounded">
									<%= usuario.nombre %>
								</p>
							</div>
						</div>
					</li>
				</ul>
				<div class="flex items-center md:hidden">
					<button
						class="text-white text-4xl font-bold opacity-70 hover:opacity-100 duration-300"
						onclick="toggleMenu()"
					>
						&#9776;
					</button>
				</div>
			</div>
		</header>
		<div
			id="content"
			class="pl-2 duration-200 h-screen bg-gray-50 overflow-x-auto"
		>
			<div
				id="menu"
				class="nav h-full w-0 fixed flex flex-col left-0 top-0 bg-white opacity-90 overflow-x-hidden duration-200 border-r"
			>
				<button
					class="close flex pr-2 py-2 my-2 text-[25px] text-red-400 hover:text-red-900 duration-200 absolute top-0 right-0 pl-64 cursor-pointer bg-red-50 hover:bg-red-100"
					onclick="closeSlideMenu()"
				>
					<svg
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						id="chevron-double-left"
						class="w-8 h-8 hover:bg-red-300 hover:rounded"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M11 19l-7-7 7-7m8 14l-7-7 7-7"
						></path>
					</svg>
				</button>
				<ul class="flex flex-col my-16">
					<li class="px-5">
						<div class="flex flex-row items-center h-8">
							<div class="text-sm font-light tracking-wide text-gray-900">
								Menú
							</div>
						</div>
					</li>
					<li>
						<a
							href="./principal_Med.html"
							class="py-1 my-1 relative flex flex-row items-center h-11 bg-gray-200 hover:bg-gray-200 text-gray-900 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6 focus:bg-gray-200 focus:outline-none focus:shadow-outline"
							onclick="selectOption('Menú:','Principal')"
						>
							<span class="inline-flex justify-center items-center ml-4">
								<svg
									class="w-5 h-5"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
									></path>
								</svg>
							</span>
							<span class="ml-2 text-sm tracking-wide truncate">Principal</span>
						</a>
					</li>
					<li>
						<a
							href="./pacientes_Med.html"
							class="py-1 my-1 relative flex flex-row items-center h-11 hover:bg-gray-200 text-gray-900 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6 focus:bg-gray-200 focus:outline-none focus:shadow-outline"
							onclick="selectOption('Menú:','Pacientes')"
						>
							<span class="inline-flex justify-center items-center ml-4">
								<svg
									fill="none"
									viewBox="0 0 24 24"
									stroke="currentColor"
									id="users"
									class="w-5 h-5"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"
									></path>
								</svg>
							</span>
							<span class="ml-2 text-sm tracking-wide truncate">Pacientes</span>
						</a>
					</li>
					<li>
						<a
							href="./cuestionarios_Med.html"
							class="py-1 my-1 relative flex flex-row items-center h-11 hover:bg-gray-200 text-gray-900 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6 focus:bg-gray-200 focus:outline-none focus:shadow-outline"
							onclick="selectOption('Menú:','Cuestionarios')"
						>
							<span class="inline-flex justify-center items-center ml-4">
								<svg
									fill="none"
									viewBox="0 0 24 24"
									stroke="currentColor"
									id="document-text"
									class="w-5 h-5"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
									></path>
								</svg>
							</span>
							<span class="ml-2 text-sm tracking-wide truncate"
								>Cuestionarios</span
							>
						</a>
					</li>
					<li>
						<a
							href="./examenes_Med.html"
							class="py-1 my-1 relative flex flex-row items-center h-11 hover:bg-gray-200 text-gray-900 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6 focus:bg-gray-200 focus:outline-none focus:shadow-outline"
							onclick="selectOption('Menú:','Exámenes')"
						>
							<span class="inline-flex justify-center items-center ml-4">
								<svg
									class="w-5 h-5"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"
									></path>
								</svg>
							</span>
							<span class="ml-2 text-sm tracking-wide truncate">Exámenes</span>
						</a>
					</li>

					<li class="px-5">
						<div class="flex flex-row items-center h-8">
							<div class="text-sm font-light tracking-wide text-gray-900">
								Configuración
							</div>
						</div>
					</li>
					<li>
						<a
							href="./perfil_Med.html"
							class="py-1 my-1 relative flex flex-row items-center h-11 hover:bg-gray-200 text-gray-900 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6 focus:bg-gray-200 focus:outline-none focus:shadow-outline"
							onclick="selectOption('Configuración:','Perfil')"
						>
							<span class="inline-flex justify-center items-center ml-4">
								<svg
									class="w-5 h-5"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
									></path>
								</svg>
							</span>
							<span class="ml-2 text-sm tracking-wide truncate">Perfil</span>
						</a>
					</li>
					<li>
						<a
							id="logout_open"
							class="py-1 my-1 relative flex flex-row items-center h-11 hover:bg-gray-200 text-gray-900 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6 focus:bg-gray-200 focus:outline-none focus:shadow-outline cursor-pointer"
							onclick="selectOption('Configuración:','Cerrar Sesión')"
						>
							<span class="inline-flex justify-center items-center ml-4">
								<svg
									class="w-5 h-5"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
									></path>
								</svg>
							</span>
							<span class="ml-2 text-sm tracking-wide truncate"
								>Cerrar Sesión</span
							>
						</a>
					</li>
				</ul>
			</div>
			<span class="slide">
				<button
					class="close block w-20 text-2xl duration-100 pr-8 py-2 pl-2 border-b-2 text-blue-500 hover:text-sky-800"
					onclick="openSlideMenu()"
				>
					<svg
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						id="menu"
						class="w-10 h-8 hover:bg-blue-300 hover:rounded"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M4 6h16M4 12h16M4 18h16"
						></path>
					</svg>
				</button>
			</span>
			<div class="pt-4 grid grid-cols-[1fr] bg-gray-50 overflow-x-auto">
				<div
					class="flex mb-4 mx-auto border border-blue-500 justify-center rounded-2xl text-black bg-blue-200 shadow-lg"
				>
					<div class="flex flex-row px-32 items-center">
						<div class="flex justify-center mx-2 w-16 h-16">
							<img
								class="box-border max-w-full align-middle"
								src="../../public/images/estetoscopio.png"
							/>
						</div>
						<div class="flex flex-col mx-4 border-solid py-2">
							<div class="flex flex-row">
								<div class="box-border border-solid text-md font-bold">
									Personal Médico:
								</div>
								<span
									class="box-border px-1 border-solid text-normal tracking-wide"
								>
									Medicina General
								</span>
							</div>
							<ul class="mt-4 flex flex-col">
								<li class="mb-2 flex justify-center text-lg font-normal">
									<span class="underline mr-1">Correo:</span>
									<%= usuario.email%>
								</li>
								<li class="mb-2 flex justify-center text-lg font-normal">
									<span class="underline mr-1">Sede:</span>
									<%= usuario.medicos[0].sede%>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="flex flex-col mx-16 mb-4">
					<div
						class="flex flex-row justify-between border-b py-2 px-8 rounded-lg border text-md font-semibold tracking-wider text-white bg-sky-500 w-full mb-2 shadow-md"
					>
						Notificaciones
					</div>
					<div class="flex flex-col mx-2 justify-around">
						<table id="dataNotificacionesMed" class="table">
							<tr>
								<td>
									<button
										id="notificacion_open"
										class="flex justify-center px-8 py-4 m-1 shadow rounded-lg border-2 border-gray-200 bg-blue-50 h-full w-full"
									>
										<svg
											fill="none"
											viewBox="0 0 24 24"
											stroke="currentColor"
											id="plus-circle"
											class="w-8 h-8 text-blue-500"
										>
											<path
												stroke-linecap="round"
												stroke-linejoin="round"
												stroke-width="2"
												d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
											></path>
										</svg>
									</button>
								</td>
							</tr>
							<% if(notificaciones !=undefined){ notificaciones.forEach((n)=>{%>
							<tr>
								<td>
									<div
										class="px-8 py-4 m-1 shadow rounded-lg border-2 border-gray-200 bg-blue-50 h-full w-full"
									>
										[<%=n.fechacreacion%>] <%= n.paciente.usuario.nombre %> (<%=n.rutpaciente%>) | <%=n.observacion%>
									</div>
								</td>
							</tr>
							<%})};%>
						</table>
					</div>
				</div>
				<div
					class="flex flex-col mx-16 my-4 shadow-md rounded-lg border bg-blue-50"
				>
					<div
						class="flex flex-row justify-start border-b py-2 px-8 rounded-lg border text-md font-semibold tracking-wider text-white bg-blue-500 w-full"
					>
						Cuestionarios Pendientes
					</div>
					<table id="dataCuestionariosPendMed" class="table">
						<%if(pacientes !=undefined){
						pacientes.forEach((p)=> {%> <%
						if(p.pacientes[0].cuestionarios.length == 0){ %>
						<tr>
							<td>
								<div
									class="mx-1 mb-1 p-4 flex flex-row justify-center border-b border-gray-400"
								>
									<div class="flex flex-col px-8 items-center">
										<div
											class="flex text-md font-semibold tracking-wide underline"
										>
											Paciente:
										</div>
										<div class="pacientePendMed flex"><%=p.nombre%></div>
									</div>
									<div class="flex flex-col px-8 items-center">
										<div
											class="flex text-md font-semibold tracking-wide underline"
										>
											Rut:
										</div>
										<div class="rutPendMed flex"><%=p.rut%></div>
									</div>
									<div class="flex mx-2 px-16 items-center tracking-wide">
										<a href="./cuestionario-0_Med.html">
											<button
												class="completarPendMed flex text-sm p-2 rounded-md text-green-800 bg-blue-200 hover:bg-blue-400 cursor-pointer"
											>
												Completar cuestionario
											</button>
										</a>
									</div>
								</div>
							</td>
						</tr>
						<%}})};%>
					</table>
				</div>
			</div>
		</div>
		<div
			id="logout_panel"
			class="bg-gray-900 opacity-95 fixed w-full inset-0 z-50 justify-center items-center hidden"
		>
			<div class="bg-gray-300 opacity-100 sm:w-full mx-2 rounded-xl z-50 p-4">
				<div
					class="flex justify-between items-center pb-8 font-medium text-xl sm:text-xl text-black"
				>
					¿Está seguro que desea cerrar sesión?
				</div>
				<div class="flex justify-center pt-2">
					<form method="post" action="/cerrarSesion">
						<button
							id="closeSesion"
							type="submit"
							class="px-4 p-3 rounded-md text-white bg-red-500 hover:bg-red-600"
						>
							Cerrar Sesión
						</button>
					</form>
					<button
						id="logout_close"
						class="ml-4 px-4 p-3 rounded-md text-black bg-gray-400 hover:bg-gray-500"
					>
						Cancelar
					</button>
				</div>
			</div>
		</div>
		<form action="/ingresarNotificacion" method="post">
			<div
				id="notificacion_panel"
				class="bg-blue-300 opacity-[.97] fixed inset-0 z-50 justify-center items-center hidden"
			>
				<div
					class="flex flex-col bg-gray-200 mx-auto rounded-2xl z-50 px-32 py-16 border border-blue-500"
				>
					<div
						class="flex flex-col justify-center items-center m-8 font-normal text-lg text-black"
					>
						<div class="underline">Rut paciente</div>
						<input
							id="rutNotPaciente"
							name="rutpaciente"
							class="rounded-lg py-2 px-4 my-4 text-center border border-blue-200"
						/>
						<div class="underline">Escriba aquí la notificación</div>
						<textarea
							id="textNotPaciente"
							name="observacion"
							class="textarea rounded-lg p-16 my-2 w-auto border border-blue-200"
							cols="50"
						></textarea>
					</div>
					<div class="flex justify-center pt-2">
						<button
							id=""
							class="px-4 p-3 rounded-md border border-blue-600 text-white bg-blue-500 hover:bg-blue-600"
							type="submit"
						>
							Notificar
						</button>
						<button
							id="notificacion_close"
							type="button"
							class="ml-4 px-4 p-3 rounded-md text-black bg-gray-300 border border-gray-400 hover:bg-gray-400"
						>
							Cancelar
						</button>
					</div>
				</div>
			</div>
		</form>
		<%if(alerta != undefined){%>
		<div
			id="messageRecomendacion_panel"
			class="bg-blue-300 opacity-95 fixed w-full inset-0 z-50 justify-center items-center flex"
		>
			<div class="bg-gray-100 opacity-100 mx-auto rounded-xl z-50 p-16">
				<div
					class="flex justify-center items-center py-4 px-16 font-medium text-xl text-black uppercase"
				>
					Resultados cuestionario del paciente con RUT <%=alerta.rutpaciente%>
				</div>
				<div class="flex flex-col rounded-lg border border-blue-300">
					<div
						class="flex justify-center items-center py-4 px-16 font-medium text-md text-black"
					>
						ID: <%=alerta.id%>, Puntaje: <%=alerta.puntajetotal%>
					</div>
					<div
						class="flex justify-center items-center py-4 px-16 font-medium text-md text-black"
					>
						Fecha: <%=alerta.fechaencuesta.getDate()+"-"+(alerta.fechaencuesta.getMonth()+1)+"-"+alerta.fechaencuesta.getFullYear()%>
					</div>
					<div
						class="flex justify-center items-center py-4 px-16 font-medium text-md text-black"
					>
						<%=alerta.resultado%>
					</div>
				</div>
				<div class="flex justify-center m-4 p-2">
					<button
						id="messageRecomendacion_close"
						type="button"
						class="px-4 p-3 rounded-md text-white bg-blue-500 hover:bg-blue-600 border border-blue-700"
					>
						Volver al menú principal
					</button>
				</div>
			</div>
		</div>
		<%}%>
	</body>
	<script src="../../js/Principal/index.js"></script>
	<script src="../../js/ModalLogout/index.js"></script>
	<script src="../../js/ModalNotificacionesMed/index.js"></script>
	<script src="../../js/ModalMesRecomendacion/index.js"></script>
	<script type="text/javascript" src="../../js/Paging/paging.js"></script>
	<script type="text/javascript">
		$(document).ready(() =>
			$("#dataCuestionariosPendMed").paging({ limit: 5 }),
		);
		$(document).ready(() => $("#dataNotificacionesMed").paging({ limit: 3 }));
	</script>
</html>
